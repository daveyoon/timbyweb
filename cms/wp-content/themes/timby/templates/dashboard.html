<!-- @todo: move this header to its own directive -->
<header class="clearfix main-header">
  <div class="clearfix">
    <div class="pull-left">
      <h3>Timby</h3>
    </div>
    <div class="pull-right">
      <button>Logout</button>
    </div>
  </div>
  <nav class="tabs">
    <li class="tab-item active"><a href="#/dashboard">Moderation</a></li>
    <li class="tab-item"><a href="#">Create a Story</a></li>
    <li class="tab-item"><a href="#/addreport">Add Report</a></li>
  </nav>
</header>
<section class="l-main-unit clearfix" ng-class="{ 'filters-hidden': showFilters }">
  <section class="filters l-column">
    
    <div class="filters-hide">
      <div class="filters-button" ng-click="showFilters = ! showFilters">
        <span class="fa fa-tasks"></span>
      </div>
      SHOW<BR/>
      FILTERS
    </div>
    <div class="filters-alive">
      <div class="clearfix">
        <h4 class="pull-left">Filters</h4>
        <button ng-click="showFilters = ! showFilters" ng-class="{ 'filters-hidden': showFilters }" class="filter-control-button pull-right btn-small"></button>
      </div>
      <form role="form">
        <div class="form-group">
            <h6 class="form-title">Sector</h6>
            <div class="checkbox checkbox-lined" ng-repeat="term in wordpress.terms.sector">
              <input id="term_{{term.id}}" type="checkbox" checklist-model="filtercriteria.sectors" checklist-value="term">
              <label for="term_{{term.id}}">{{term.name}}</label>
            </div>
            <!-- <div class="checkbox">
              <div class="dummy-check">.</div>
              <label for="blah2">Checkbox No. 2</label>
            </div>
            <div class="checkbox">
              <div class="dummy-check active">x</div>
              <label for="blah2">Checkbox No. 3</label>
            </div> -->
        </div><!--end Sector-->
        
        <!-- Tags -->
        <div class="form-group">
          <h6 class="form-title">Tags</h6>
          <div>
            <select chosen
                    ng-model="filter_entity_selected"
                    data-placeholder="Start typing to bring up tags" 
                    ng-options="term.name for term in wordpress.terms.entity"
                    width="'100%'">
                    <option value=""></option>
            </select>
          </div>

          <div class="tag-cloud">
            <span class="tag tag-rounded tag-remove" ng-click="removeEntityFilter(term)" ng-repeat="term in filtercriteria.entities">
              {{term.name}} <i class="fa fa-times" ></i>
            </span>
          </div>
        </div><!--end Tags-->

        <div class="form-group">
          <h6 class="form-title">Date</h6>
          <div>
            <div class="six">
              <input type="date" placeholder="Start Date">
            </div>
            <div class="six">
              <input type="date" placeholder="End Date">
            </div>
          </div>
        </div><!--end Dates-->
      </form>
    </div>
  </section>
  
  <section class="results l-column">
    <!-- <h4>Reports</h4> -->
    <ul class="list">
      <li class="list-item highlight">
        <div class="form-group">
          <div>
            <input type="search" id="search" placeholder="Search Reports" ng-model="filtercriteria.search">
          </div>
        </div>
      </li>
      <li class="list-item" ng-repeat="report in reports | searchFilter:filtercriteria.search | sectorFilter:filtercriteria.sectors | entityFilter:filtercriteria.entities" ng-click="viewReport(report.ID)">
        <a href="">
          <span ng-show="report.verified" class="top-right-triangle-small triangle-good"></span>
          <span ng-show="!report.verified" class="top-right-triangle-small triangle-bad"></span>
          <h5 class="list-title">{{report.post_title}}</h5>
          <p class="list-content">
            {{report.date_reported}} by {{report.reporter.name}}
          </p>
          <div class="horz-list">
            <i class="fa fa-camera"></i>        {{report.media.photos.length}} &nbsp;&nbsp;
            <i class="fa fa-video-camera"></i>  {{report.media.video.length}} &nbsp;&nbsp;
            <i class="fa fa-volume-up"></i>     {{report.media.audio.length}}

            <!-- <span class="icon-camera"></span>     {{ report.media.photos.length}} &nbsp;&nbsp; 
            <span class="icon-videocam"></span>   {{ report.media.video.length}} &nbsp;&nbsp; 
            <span class="icon-volume-up"></span>  {{ report.media.audio.length}} &nbsp;&nbsp; -->
          </div>
        </a>
      </li>
    </ul>
  </section>

  <section class="report l-column">
    <div class="placeholder" ng-if="!report">
      <h2>Click on a report to preview it here</h2>
    </div>
    
    <div ng-if="report">
      <div class="row l-group">
          <div class="nine">
            <div class="kicker pull-left clearfix" ng-repeat="term in report.sectors">
              <h6 class="">{{term.name}}&nbsp;</h6>
            </div>
            <div class="pull-left" style="position:relative; margin: -5px 0 0 12px;">
              <a href="" ng-click="showList=!showList" class="tag tag-small tag-edit">EDIT SECTOR</a>
              <div class="edit-pane" ng-show="showList">
                <div class="checkbox"  ng-repeat="term in wordpress.terms.sector" >
                  <input id="{{term.id}}" type="checkbox" checklist-model="report.sectors" checklist-value="term">
                  <label for="{{term.id}}">{{term.name}}</label>
                </div>
                <!-- <label ng-repeat="term in terms.sector" class="checkbox-label">
                  <input type="checkbox" checklist-model="report.sectors" checklist-value="term" ><span>{{term.name}}</span>
                </label> -->
                <div>
                  <button ng-click="showList=!showList" class="small">Close</button>
                </div>
              </div>
            </div>
            <!-- <h3>{{report.post_title}}</h3> -->
            <input type="text" ng-model="report.post_title" class="h3-input">
            <h5 class="subhead">{{report.date_reported}} by {{report.reporter.name}}</h5>
            <!-- <div>
              <span class="tag" ng-repeat="term in report.categories">{{term.name}} </span>
            </div> -->
            <div class="entity-list l-group">
              <span class="tag tag-remove" ng-repeat="term in report.entities" ng-click="removeEntity(term)">
                {{term.name}} <a href="" title="removetag" ><i class="fa fa-times"></i></a>
              </span> 
            </div>
            <div class="l-group">
              <div class="six">
                <select chosen
                        ng-model="termselected"
                        data-placeholder="Select a tag" 
                        ng-options="term.name for term in wordpress.terms.entity"
                        width="'100%'">
                        <option value=""></option>
                </select>
              </div>
              <span ng-show="tagexists">Report has already been tagged with this entity, please select another entity</span>
            </div>
          </div>
          <div class="three">
            <div id="report-location"></div>
          </div>
      </div>

      <div class="row l-group" id="report_content" text-angular ta-toolbar="[['bold','italics','underline'],['ul','ol','quote','insertLink', 'unlink'],['redo','undo']]" ng-model="report.post_content"></div><!-- end description -->
       
      <div  class="row l-media-grid l-group" ng-if="report.media.photos.length > 0">
        <div class="three" ng-repeat="photo in report.media.photos">
          <a href="#" class="thumbnail">
            <img ng-src="{{photo.guid}}">
          </a>
        </div>
      </div><!-- end photos -->
              
      <div  class="row l-media-grid l-group" ng-if="report.media.audio.length > 0">
        <div class="three" ng-repeat="audio in report.media.audio">
          <iframe ng-src="{{trustSrc(audio.soundcloud.embed_url)}}" width="100%"  height="166" scrolling="no" frameborder="no"></iframe>
        </div>
      </div><!-- end audio -->
        
      <div class="row l-media-grid l-group" ng-if="report.media.video.length > 0">
        <div class="six" ng-repeat="video in report.media.video">
          <iframe 
              ng-src="{{trustSrc(video.vimeo.embed_url)}}" 
              width="500" 
              height="281" 
              frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
          </iframe> 
        </div>
      </div><!-- end videos -->
      <span ng-show="report.verified" class="top-right-triangle triangle-good"></span>
      <span ng-show="!report.verified" class="top-right-triangle triangle-bad"></span>
      <div class="row">
        <div class="twelve">
          <button ng-class="report.verified ? 'verified' : 'unverified'" class="pull-left">
            <span ng-show="!report.verified" ng-click="verifyReport()">Verify this Report</span>
            <span ng-show="report.verified" ng-click="verifyReport()">Unverify this Report</span>
          </button>
          <button href="" ng-click="updateReport()" class="btn-edit pull-right">Save</button> 
        </div>
      </div>      
    </div>


  </section>
</section>

