<!-- @todo: move this header to its own directive -->
<header class="clearfix main-header">
  <div class="clearfix">
    <div class="pull-left">
      <h3>Timby</h3>
    </div>
    <div class="pull-right" ng-controller="LoginController">
      <button ng-click="logout()">Logout</button>
    </div>
  </div>
  <nav class="tabs">
    <li class="tab-item active"><a href="#/dashboard">Moderation</a></li>
    <li class="tab-item"><a href="#/story/create">Create a Story</a></li>
    <li class="tab-item"><a href="#/addreport">Add Report</a></li>
  </nav>
</header>
<section class="l-main-unit clearfix" ng-class="{ 'filters-hidden': showFilters }">
  <section class="filters l-column">

    <div class="filters-hide">
      <div class="filters-button" ng-click="showFilters = ! showFilters">
        <span class="fa fa-tasks"></span>
      </div>
      SHOW<BR/>
      FILTERS
    </div>
    <div class="filters-alive">
      <div class="clearfix">
        <h4 class="pull-left">Filters</h4>
        <button ng-click="showFilters = ! showFilters" ng-class="{ 'filters-hidden': showFilters }" class="filter-control-button pull-right btn-small"></button>
      </div>
      <form role="form">
        <div class="form-group">
            <h6 class="form-title">Sector</h6>
            <div class="checkbox checkbox-lined" ng-repeat="term in wordpress.terms.sector">
              <input id="term_{{term.id}}" type="checkbox" checklist-model="filtercriteria.sectors" checklist-value="term">
              <label for="term_{{term.id}}">{{term.name}}</label>
            </div>
            <!-- <div class="checkbox">
              <div class="dummy-check">.</div>
              <label for="blah2">Checkbox No. 2</label>
            </div>
            <div class="checkbox">
              <div class="dummy-check active">x</div>
              <label for="blah2">Checkbox No. 3</label>
            </div> -->
        </div><!--end Sector-->

        <!-- Tags -->
        <div class="form-group">
          <h6 class="form-title">Tags</h6>
          <div>
            <select chosen
                    ng-model="filter_entity_selected"
                    data-placeholder="Choose a tag"
                    ng-options="term.name for term in wordpress.terms.entity"
                    width="'100%'">
                    <option value=""></option>
            </select>
          </div>

          <div class="tag-cloud">
            <span class="tag tag-rounded tag-remove tag-positive" ng-click="removeEntityFilter(term)" ng-repeat="term in filtercriteria.entities">
              {{term.name}} <i class="fa fa-times" ></i>
            </span>
          </div>
        </div><!--end Tags-->

        <!-- Tags -->
        <div class="form-group">
          <h6 class="form-title">Verification Status</h6>
          <div class="radio radio-lined">
            <input type="radio" name="status" id="verified" value="verified" ng-model="filtercriteria.status" >
            <label for="verified">Verified</label>
          </div>
          <div class="radio radio-lined">
            <input type="radio" name="status" id="unverified" value="unverified" ng-model="filtercriteria.status">
            <label for="unverified" >Unverified</label>
          </div>
          <div class="radio radio-lined">
            <input type="radio" name="status" id="all" value="all" ng-model="filtercriteria.status">
            <label for="all" >All Reports</label>
          </div>
        </div><!--end Tags-->

        <!-- <div class="form-group">
          <h6 class="form-title">Date</h6>
          <div>
            <div class="six">
              <input type="date" placeholder="Start Date">
            </div>
            <div class="six">
              <input type="date" placeholder="End Date">
            </div>
          </div>
        </div> --><!--end Dates-->
      </form>
    </div>
  </section>

  <section class="results l-column">
    <ul class="list"  ng-class="{ loading : working }">
      <li class="list-item list-highlight">
        <div class="form-group">
          <div>
            <input type="search" id="search" placeholder="Search Reports" ng-model="filtercriteria.search">
          </div>
        </div>
      </li>
      <h4 ng-show="working">Loading...</h4>
      <li class="list-item list-clickable" ng-repeat="report in reports | searchFilter:filtercriteria.search | sectorFilter:filtercriteria.sectors | entityFilter:filtercriteria.entities | verifiedStatusFilter:filtercriteria.status" ng-click="viewReport(report.ID)" ng-class="isActive(report.ID) ? 'list-item-active' : '' ">
        <a href="">
          <span ng-show="report.verified" class="top-right-triangle-small triangle-good"></span>
          <span ng-show="!report.verified" class="top-right-triangle-small triangle-bad"></span>
          <h6 class="list-title">{{report.post_title}}</h6>
          <p class="list-content text-muted">
            {{report.date_reported}} by {{report.reporter.name}}
          </p>
          <div class="horz-list text-muted">
            <i class="fa fa-camera"></i>        {{report.media.photos.length}} &nbsp;&nbsp;
            <i class="fa fa-video-camera"></i>  {{report.media.video.length}} &nbsp;&nbsp;
            <i class="fa fa-volume-up"></i>     {{report.media.audio.length}}

            <!-- <span class="icon-camera"></span>     {{ report.media.photos.length}} &nbsp;&nbsp;
            <span class="icon-videocam"></span>   {{ report.media.video.length}} &nbsp;&nbsp;
            <span class="icon-volume-up"></span>  {{ report.media.audio.length}} &nbsp;&nbsp; -->
          </div>
        </a>
      </li>
    </ul>
  </section>

  <section class="report l-column">
    <div class="placeholder" ng-if="!report">
      <div class="centered-box">
        Click a report on the left to load it here
      </div>
    </div>

    <div ng-if="report" ng-class="{ loading : working }">
      <h2 ng-show="working">Loading...</h2>
      <span ng-show="report.verified" class="top-right-triangle triangle-good"></span>
      <span ng-show="!report.verified" class="top-right-triangle triangle-bad"></span>

      <div class="l-padding-item">
        <div class="row l-group">
            <div class="nine">
              <div class="pull-left" style="position:relative; margin: -5px 12px 0 0;">
                <a href="" ng-click="showList=!showList" class="tag tag-small tag-edit">EDIT SECTOR</a>
                <div class="edit-pane" ng-show="showList">
                  <div class="checkbox"  ng-repeat="term in wordpress.terms.sector" >
                    <input id="{{term.id}}" type="checkbox" checklist-model="report.sectors" checklist-value="term">
                    <label for="{{term.id}}">{{term.name}}</label>
                  </div>
                  <!-- <label ng-repeat="term in terms.sector" class="checkbox-label">
                    <input type="checkbox" checklist-model="report.sectors" checklist-value="term" ><span>{{term.name}}</span>
                  </label> -->
                  <div>
                    <button ng-click="showList=!showList" class="small">Close</button>
                  </div>
                </div>
              </div>
              <div class="kicker pull-left clearfix" ng-repeat="term in report.sectors">
                <h6 class="">{{term.name}}&nbsp;</h6>
              </div>
              <!-- <h3>{{report.post_title}}</h3> -->
              <input type="text" ng-model="report.post_title" class="h3-input">
              <h6 class="subhead">{{report.date_reported}} by {{report.reporter.name}}</h6>
              <!-- <div>
                <span class="tag" ng-repeat="term in report.categories">{{term.name}} </span>
              </div> -->
              <div class="entity-list l-group">
                <span class="tag tag-remove tag-rounded" ng-repeat="term in report.entities" ng-click="removeEntity(term)">
                  {{term.name}} <a href="" title="removetag" ><i class="fa fa-times"></i>&nbsp; </a>
                </span>
              </div>
        
              <div class="l-group">
                <div class="six">
                  <select chosen
                          ng-model="report.termselected"
                          data-placeholder="Click to add a tag"
                          ng-options="term.name for term in wordpress.terms.entity"
                          width="'100%'">
                          <option value=""></option>
                  </select>
                </div>
                <span ng-show="tagexists">Report has already been tagged with this entity, please select another entity</span>
              </div>
            </div>
            <div class="three">
              <div id="report-location"></div>
            </div>
        </div>
        
        <div class="row l-group" id="report_content" text-angular ta-toolbar="[['bold','italics','underline'],['ul','ol','quote','insertLink', 'unlink'],['redo','undo']]" ng-model="report.post_content"></div><!-- end description -->
        
        <div  class="row l-media-grid l-group" ng-if="report.media.photos.length > 0">
          <div class="three media-item" ng-repeat="photo in report.media.photos">
            <a href="#" class="thumbnail">
              <img ng-src="{{photo.guid}}">
            </a>
            <a href="" ng-click="detachMedia(photo.ID, $event)">remove</a>
          </div>
        </div><!-- end photos -->
        
        <div  class="row l-media-grid l-group" ng-if="report.media.audio.length > 0">
          <div class="three media-item" ng-repeat="audio in report.media.audio">
            <div ng-if="audio.uploaded">
              <iframe ng-src="{{trustSrc(audio.soundcloud.embed_url)}}" width="100%"  height="166" scrolling="no" frameborder="no"></iframe>
            </div>
            <div ng-if="!audio.uploaded">
              <div class="media-placeholder media-placeholder-audio">
                <div class="media-placeholder-content">
                  <span class="fa fa-volume-up media-placeholder-icon"></span>
                  Upload to Soundcloud in progress...
                </div>
              </div>
            </div>
            <button href="" ng-click="detachMedia(audio.ID, $event)" class="btn-delete">remove</button>
          </div>
        </div><!-- end audio -->

      <!--   <div class="row l-media-grid l-group" >
          <div class="six media-item">
            <div class="media-placeholder media-placeholder-video">
                <span class="fa fa-video-camera media-placeholder-icon"></span>
                  Upload to Vimeo in progress...
            </div>
          </div>
        </div>
        <div class="row l-media-grid l-group" >
          <div class="three media-item">
            <div class="media-placeholder media-placeholder-audio">
                <span class="fa fa-volume-up media-placeholder-icon"></span>
                  Upload to SoundCloud in progress...
            </div>
          </div>
        </div> -->

        <div class="row l-media-grid l-group" ng-if="report.media.video.length > 0">
          <div class="six media-item" ng-repeat="video in report.media.video">
            <div ng-if="video.uploaded">
              <iframe
                  ng-src="{{trustSrc(video.vimeo.embed_url)}}"
                  width="500"
                  height="281"
                  frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
              </iframe>              
            </div>
            <div ng-if="!video.uploaded">
              <div class="media-placeholder media-placeholder-video">
                <span class="fa fa-video-camera media-placeholder-icon"></span>
                  Upload to Vimeo in progress...
              </div>
            </div>
            <button href="" ng-click="detachMedia(video.ID, $event)" class="btn-delete">Remove</button>
          </div>
        </div><!-- end videos -->
      </div>

    <div class="action-bar">
        <div>
          <button ng-class="report.verified ? 'verified' : 'unverified'" class="pull-left" style="margin-right:2em;">
            <span ng-show="!report.verified" ng-click="verifyReport()">Verify this Report</span>
            <span ng-show="report.verified" ng-click="verifyReport()">Unverify this Report</span>
          </button>
          <button href="" ng-click="updateReport()" class="btn-edit pull-left">Save</button>
        </div>
    </div>
    </div>


  </section>
</section>

